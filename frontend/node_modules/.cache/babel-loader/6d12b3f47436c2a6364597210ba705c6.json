{"ast":null,"code":"var _jsxFileName = \"/Users/Mark/Documents/Skola/OSPP/adrenaline/frontend/src/components/ChatContainer/ChatContainer.js\";\nimport React from \"react\";\nimport \"../../assets/main.css\";\nimport SearchBar from \"../SearchBar/SearchBar\";\nimport Chat from \"../Chat/Chat\";\nimport ChatInput from \"../ChatInput/ChatInput\";\nimport * as actions from \"../../actions/actions\";\nimport { useDispatch, useSelector } from \"react-redux\";\n/**\n * ChatContainer holds the layout of the focused view of a selected chat\n * @property {string} focusedChat the name of the chat that we are currently focusing on\n * @returns a div containing the SearchBar, Chat and ChatInput components\n */\n\nconst ChatContainer = ({\n  focusedChat\n}) => {\n  const dispatch = useDispatch();\n  /* State and callback functions for the SearchBar */\n\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\n  /**\n   * Set the state of searchTerm to the value of the input field when that changes\n   * @param event the event object of the window\n   */\n\n  const handleSearchInput = event => {\n    setSearchTerm(event.target.value);\n  };\n  /**\n   * Trigger the search of the searchTerm in the actuall focused chat\n   * event parameter is displayed only to prevent he windows default action when pressing a submit button\n   * @param event the event object of the window\n   */\n\n\n  const handleSearchSubmit = event => {\n    /* TODO Actually search for chat messages containing the text in searchTerm and only allow that\n       to be displayed in the chat\n    */\n    console.log(searchTerm);\n    setSearchTerm(\"\");\n    event.preventDefault();\n  };\n  /* get my username from redux store */\n\n\n  const myUsername = useSelector(state => state.loginState.username);\n  /* State and callback functions for Chat and ChatInput */\n\n  const listOfDms = useSelector(state => state.socketState.listOfDms);\n\n  const rightChat = list => {\n    for (const chat of list) {\n      console.log(chat);\n\n      if (chat.chatName === focusedChat) {\n        return chat.messages;\n      }\n    }\n\n    return [];\n  };\n\n  const [messages, setMessages] = React.useState([]);\n  /*This is the state used when typing a new message*/\n\n  const [newMessage, setNewMessage] = React.useState(\"\");\n  /**\n   * Set the messages state by updating it with the \"newMessage\" message\n   * @param event the event object of the window\n   */\n\n  const sendMessage = event => {\n    event.preventDefault();\n    setMessages([...messages, {\n      message: newMessage,\n      username: myUsername\n    }]);\n    dispatch(actions.sendMessage({\n      message: newMessage,\n      username: myUsername,\n      chatName: focusedChat\n    }));\n    setNewMessage(\"\");\n  };\n  /**\n   * Set the newMessage state to whatever value is in event target\n   * @param event the event object of the window\n   */\n\n\n  const handleMessage = event => {\n    setNewMessage(event.target.value);\n  };\n  /* HANDLING THE DISPLAY OF NEW MESSAGES AND NEW FOCUSED CHAT */\n\n  /* \n    will render on mount - dependency list holds focusedChat so whenever that changes we will fire everything inside useEffect\n    when focusedChat changes we change the messages that are displayed. \n    \n    If state of listOfDms changes we will refire this aswell displaying the new chat messages \n    ( this hapens when we get a response from someone or when we send a message and update listOfDms)\n  \n  TODO.. I dont know if this is bad performance wise when messages get really long to refire everything? :O \n    */\n\n\n  React.useEffect(() => {\n    console.log(\"fookus my man fookus\");\n\n    if (listOfDms != null) {\n      setMessages(rightChat(listOfDms));\n    }\n  }, [focusedChat, listOfDms]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col content-center focused-view-custom-bg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SearchBar, {\n    id: \"search-chat\",\n    value: searchTerm,\n    onButtonClick: handleSearchSubmit,\n    onInputChange: handleSearchInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Chat, {\n    messages: messages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }), focusedChat ? /*#__PURE__*/React.createElement(ChatInput, {\n    message: newMessage,\n    handleInputChange: handleMessage,\n    handleButtonClick: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 22\n    }\n  }) : null);\n};\n\nexport default ChatContainer;","map":{"version":3,"sources":["/Users/Mark/Documents/Skola/OSPP/adrenaline/frontend/src/components/ChatContainer/ChatContainer.js"],"names":["React","SearchBar","Chat","ChatInput","actions","useDispatch","useSelector","ChatContainer","focusedChat","dispatch","searchTerm","setSearchTerm","useState","handleSearchInput","event","target","value","handleSearchSubmit","console","log","preventDefault","myUsername","state","loginState","username","listOfDms","socketState","rightChat","list","chat","chatName","messages","setMessages","newMessage","setNewMessage","sendMessage","message","handleMessage","useEffect"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,uBAAP;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,IAAP,MAAiB,cAAjB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAO,KAAKC,OAAZ,MAAyB,uBAAzB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA;;;;;;AAKA,MAAMC,aAAa,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAqB;AACzC,QAAMC,QAAQ,GAAGJ,WAAW,EAA5B;AAEA;;AAEA,QAAM,CAACK,UAAD,EAAaC,aAAb,IAA8BX,KAAK,CAACY,QAAN,CAAe,EAAf,CAApC;AAEA;;;;;AAIA,QAAMC,iBAAiB,GAAIC,KAAD,IAAW;AACnCH,IAAAA,aAAa,CAACG,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAb;AACD,GAFD;AAIA;;;;;;;AAKA,QAAMC,kBAAkB,GAAIH,KAAD,IAAW;AACpC;;;AAGAI,IAAAA,OAAO,CAACC,GAAR,CAAYT,UAAZ;AACAC,IAAAA,aAAa,CAAC,EAAD,CAAb;AACAG,IAAAA,KAAK,CAACM,cAAN;AACD,GAPD;AASA;;;AACA,QAAMC,UAAU,GAAGf,WAAW,CAAEgB,KAAD,IAAWA,KAAK,CAACC,UAAN,CAAiBC,QAA7B,CAA9B;AAEA;;AAEA,QAAMC,SAAS,GAAGnB,WAAW,CAAEgB,KAAD,IAAWA,KAAK,CAACI,WAAN,CAAkBD,SAA9B,CAA7B;;AAEA,QAAME,SAAS,GAAIC,IAAD,IAAU;AAC1B,SAAK,MAAMC,IAAX,IAAmBD,IAAnB,EAAyB;AACvBV,MAAAA,OAAO,CAACC,GAAR,CAAYU,IAAZ;;AACA,UAAIA,IAAI,CAACC,QAAL,KAAkBtB,WAAtB,EAAmC;AACjC,eAAOqB,IAAI,CAACE,QAAZ;AACD;AACF;;AACD,WAAO,EAAP;AACD,GARD;;AAUA,QAAM,CAACA,QAAD,EAAWC,WAAX,IAA0BhC,KAAK,CAACY,QAAN,CAAe,EAAf,CAAhC;AAEA;;AACA,QAAM,CAACqB,UAAD,EAAaC,aAAb,IAA8BlC,KAAK,CAACY,QAAN,CAAe,EAAf,CAApC;AAEA;;;;;AAIA,QAAMuB,WAAW,GAAIrB,KAAD,IAAW;AAC7BA,IAAAA,KAAK,CAACM,cAAN;AACAY,IAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAc;AAAEK,MAAAA,OAAO,EAAEH,UAAX;AAAuBT,MAAAA,QAAQ,EAAEH;AAAjC,KAAd,CAAD,CAAX;AACAZ,IAAAA,QAAQ,CACNL,OAAO,CAAC+B,WAAR,CAAoB;AAClBC,MAAAA,OAAO,EAAEH,UADS;AAElBT,MAAAA,QAAQ,EAAEH,UAFQ;AAGlBS,MAAAA,QAAQ,EAAEtB;AAHQ,KAApB,CADM,CAAR;AAOA0B,IAAAA,aAAa,CAAC,EAAD,CAAb;AACD,GAXD;AAaA;;;;;;AAIA,QAAMG,aAAa,GAAIvB,KAAD,IAAW;AAC/BoB,IAAAA,aAAa,CAACpB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAb;AACD,GAFD;AAIA;;AAEA;;;;;;;;;;;AASAhB,EAAAA,KAAK,CAACsC,SAAN,CAAgB,MAAM;AACpBpB,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;;AACA,QAAIM,SAAS,IAAI,IAAjB,EAAuB;AACrBO,MAAAA,WAAW,CAACL,SAAS,CAACF,SAAD,CAAV,CAAX;AACD;AACF,GALD,EAKG,CAACjB,WAAD,EAAciB,SAAd,CALH;AAOA,sBACE;AAAK,IAAA,SAAS,EAAC,qDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AACE,IAAA,EAAE,EAAC,aADL;AAEE,IAAA,KAAK,EAAEf,UAFT;AAGE,IAAA,aAAa,EAAEO,kBAHjB;AAIE,IAAA,aAAa,EAAEJ,iBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAQE,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEkB,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,EASGvB,WAAW,gBAAG,oBAAC,SAAD;AACb,IAAA,OAAO,EAAEyB,UADI;AAEb,IAAA,iBAAiB,EAAEI,aAFN;AAGb,IAAA,iBAAiB,EAAEF,WAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAIP,IAbP,CADF;AAiBD,CA/GD;;AAiHA,eAAe5B,aAAf","sourcesContent":["import React from \"react\";\nimport \"../../assets/main.css\";\nimport SearchBar from \"../SearchBar/SearchBar\";\nimport Chat from \"../Chat/Chat\";\nimport ChatInput from \"../ChatInput/ChatInput\";\nimport * as actions from \"../../actions/actions\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\n/**\n * ChatContainer holds the layout of the focused view of a selected chat\n * @property {string} focusedChat the name of the chat that we are currently focusing on\n * @returns a div containing the SearchBar, Chat and ChatInput components\n */\nconst ChatContainer = ({ focusedChat }) => {\n  const dispatch = useDispatch();\n\n  /* State and callback functions for the SearchBar */\n\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\n\n  /**\n   * Set the state of searchTerm to the value of the input field when that changes\n   * @param event the event object of the window\n   */\n  const handleSearchInput = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  /**\n   * Trigger the search of the searchTerm in the actuall focused chat\n   * event parameter is displayed only to prevent he windows default action when pressing a submit button\n   * @param event the event object of the window\n   */\n  const handleSearchSubmit = (event) => {\n    /* TODO Actually search for chat messages containing the text in searchTerm and only allow that\n       to be displayed in the chat\n    */\n    console.log(searchTerm);\n    setSearchTerm(\"\");\n    event.preventDefault();\n  };\n\n  /* get my username from redux store */\n  const myUsername = useSelector((state) => state.loginState.username);\n\n  /* State and callback functions for Chat and ChatInput */\n\n  const listOfDms = useSelector((state) => state.socketState.listOfDms);\n\n  const rightChat = (list) => {\n    for (const chat of list) {\n      console.log(chat);\n      if (chat.chatName === focusedChat) {\n        return chat.messages;\n      }\n    }\n    return [];\n  };\n\n  const [messages, setMessages] = React.useState([]);\n\n  /*This is the state used when typing a new message*/\n  const [newMessage, setNewMessage] = React.useState(\"\");\n\n  /**\n   * Set the messages state by updating it with the \"newMessage\" message\n   * @param event the event object of the window\n   */\n  const sendMessage = (event) => {\n    event.preventDefault();\n    setMessages([...messages, { message: newMessage, username: myUsername }]);\n    dispatch(\n      actions.sendMessage({\n        message: newMessage,\n        username: myUsername,\n        chatName: focusedChat,\n      })\n    );\n    setNewMessage(\"\");\n  };\n\n  /**\n   * Set the newMessage state to whatever value is in event target\n   * @param event the event object of the window\n   */\n  const handleMessage = (event) => {\n    setNewMessage(event.target.value);\n  };\n\n  /* HANDLING THE DISPLAY OF NEW MESSAGES AND NEW FOCUSED CHAT */\n\n  /* \n    will render on mount - dependency list holds focusedChat so whenever that changes we will fire everything inside useEffect\n    when focusedChat changes we change the messages that are displayed. \n    \n    If state of listOfDms changes we will refire this aswell displaying the new chat messages \n    ( this hapens when we get a response from someone or when we send a message and update listOfDms)\n  \n  TODO.. I dont know if this is bad performance wise when messages get really long to refire everything? :O \n    */\n  React.useEffect(() => {\n    console.log(\"fookus my man fookus\")\n    if (listOfDms != null) {\n      setMessages(rightChat(listOfDms));\n    }\n  }, [focusedChat, listOfDms]);\n\n  return (\n    <div className=\"flex flex-col content-center focused-view-custom-bg\">\n      <SearchBar\n        id=\"search-chat\"\n        value={searchTerm}\n        onButtonClick={handleSearchSubmit}\n        onInputChange={handleSearchInput}\n      />\n\n      <Chat messages={messages} />\n      {focusedChat ? <ChatInput\n        message={newMessage}\n        handleInputChange={handleMessage}\n        handleButtonClick={sendMessage}\n      /> : null}\n    </div>\n  );\n};\n\nexport default ChatContainer;\n"]},"metadata":{},"sourceType":"module"}