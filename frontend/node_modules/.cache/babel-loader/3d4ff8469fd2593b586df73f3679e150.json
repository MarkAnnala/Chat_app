{"ast":null,"code":"var _jsxFileName = \"/Users/Mark/Documents/Skola/OSPP/adrenaline/frontend/src/components/SideDisplayList/Logout/Logout.js\";\nimport React, { useState } from \"react\";\nimport * as actions from \"../../../actions/actions\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport logout from \"../../../img/logout.svg\";\nimport LogoutMonad from \"./LogoutMonad\";\n\nconst axios = require(\"axios\");\n/**\n * Handle the logout http response with backend\n * @param {String} username the username of the user\n * @param {String} magicToken the magictoken used for authentication on websocket connection\n * @param {function} setLogoutSuccess callback function used to set state of bool upon logout\n */\n\n\nconst logoutHandler = async (username, magicToken, setLogoutSuccess) => {\n  try {\n    const response = await axios.post(\"/\", JSON.stringify({\n      action: \"logout\",\n      username: username,\n      magic_token: magicToken\n    }));\n    const data = await response;\n\n    switch (data.status) {\n      case 200:\n        {\n          console.log(\"200\");\n          setLogoutSuccess(true);\n          break;\n        }\n\n      case 404:\n        {\n          console.log(\"404\");\n          break;\n        }\n\n      default:\n        console.log(\"default catch\");\n        break;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n/**\n * Component that handles the logout functionality\n * @returns clickable button that will logout the user\n */\n\n\nconst Logout = () => {\n  const dispatch = useDispatch();\n  const magicToken = useSelector(state => state.socketState.magicToken);\n  const username = useSelector(state => state.socketState.username);\n  const [logoutSuccess, setLogoutSuccess] = React.useState(false);\n  const [logoutMonad, setLogoutMonad] = React.useState(false);\n  React.useEffect(() => {\n    if (logoutSuccess === true) {\n      dispatch(actions.logOut());\n      /* Reset socketState */\n\n      dispatch(actions.resetLoginState());\n      /* Reset loginState  -- this will trigger redirect to login page! */\n\n      console.log(\"Successfuly logged out!\");\n    }\n  }, [logoutSuccess, dispatch]);\n  const [hovered, setHovered] = useState(false);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-white cursor-pointer flex flex-row justify-center  mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logout,\n    onMouseEnter: () => {\n      setHovered(!hovered);\n    },\n    onMouseLeave: () => {\n      setHovered(!hovered);\n    },\n    className: hovered ? \"plusIcon-custom-hover h-10 w-10 cursor-pointer\" : \"h-10 w-10 cursor-pointer\",\n    onClick: setLogoutMonad(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }), logoutMonad ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addFriend-custom-overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(LogoutMonad, {\n    logoutHandler: logoutHandler,\n    setLogoutMonad: setLogoutMonad,\n    username: username,\n    magicToken: magicToken,\n    setLogoutSuccess: setLogoutSuccess,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  })) : null);\n};\n\nexport default Logout;","map":{"version":3,"sources":["/Users/Mark/Documents/Skola/OSPP/adrenaline/frontend/src/components/SideDisplayList/Logout/Logout.js"],"names":["React","useState","actions","useDispatch","useSelector","LogoutMonad","axios","require","logoutHandler","username","magicToken","setLogoutSuccess","response","post","JSON","stringify","action","magic_token","data","status","console","log","error","Logout","dispatch","state","socketState","logoutSuccess","logoutMonad","setLogoutMonad","useEffect","logOut","resetLoginState","hovered","setHovered","logout"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport * as actions from \"../../../actions/actions\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport logout from \"../../../img/logout.svg\";\nimport LogoutMonad from \"./LogoutMonad\";\n\nconst axios = require(\"axios\");\n\n/**\n * Handle the logout http response with backend\n * @param {String} username the username of the user\n * @param {String} magicToken the magictoken used for authentication on websocket connection\n * @param {function} setLogoutSuccess callback function used to set state of bool upon logout\n */\nconst logoutHandler = async (username, magicToken, setLogoutSuccess) => {\n  try {\n    const response = await axios.post(\n      \"/\",\n      JSON.stringify({\n        action: \"logout\",\n        username: username,\n        magic_token: magicToken,\n      })\n    );\n    const data = await response;\n    switch (data.status) {\n      case 200: {\n        console.log(\"200\");\n        setLogoutSuccess(true);\n        break;\n      }\n      case 404: {\n        console.log(\"404\");\n        break;\n      }\n      default:\n        console.log(\"default catch\");\n        break;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n/**\n * Component that handles the logout functionality\n * @returns clickable button that will logout the user\n */\nconst Logout = () => {\n  const dispatch = useDispatch();\n  const magicToken = useSelector((state) => state.socketState.magicToken);\n  const username = useSelector((state) => state.socketState.username);\n  const [logoutSuccess, setLogoutSuccess] = React.useState(false);\n\n  const [logoutMonad, setLogoutMonad] = React.useState(false);\n\n  React.useEffect(() => {\n    if (logoutSuccess === true) {\n      dispatch(actions.logOut()); /* Reset socketState */\n      dispatch(\n        actions.resetLoginState()\n      ); /* Reset loginState  -- this will trigger redirect to login page! */\n      console.log(\"Successfuly logged out!\");\n    }\n  }, [logoutSuccess, dispatch]);\n\n  const [hovered, setHovered] = useState(false);\n  return (\n    <div\n      className=\"text-white cursor-pointer flex flex-row justify-center  mb-2\"\n    >\n      <img\n        src={logout}\n        onMouseEnter={() => {\n          setHovered(!hovered);\n        }}\n        onMouseLeave={() => {\n          setHovered(!hovered);\n        }}\n        className={\n          hovered\n            ? \"plusIcon-custom-hover h-10 w-10 cursor-pointer\"\n            : \"h-10 w-10 cursor-pointer\"\n        }\n        onClick={setLogoutMonad(true)}\n      />\n      {logoutMonad? (\n         <div className=\"addFriend-custom-overlay\">\n          <LogoutMonad logoutHandler={logoutHandler} setLogoutMonad={setLogoutMonad} username={username} magicToken={magicToken} setLogoutSuccess={setLogoutSuccess}/>\n        </div>\n      ): null}\n    </div>\n  );\n};\n\nexport default Logout;\n"]},"metadata":{},"sourceType":"module"}