{"ast":null,"code":"const initialState = {\n  socket: null,\n  wsOnline: false,\n  socketServer: null,\n  firstWelcome: null,\n  incomingChats: [\"\"]\n};\n/**\n * perform a task depending on the action dispatched\n *\n * @property {object} state the current state that is being held by the redux store\n * @property {object} action contains the type and payload\n */\n\nconst socketReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"CONNECT\":\n      /* store websocket in state.socket */\n      console.log(\"connecting to ws\");\n      return { ...state,\n        socket: action.payload,\n        wsOnline: true,\n        firstWelcome: true\n      };\n\n    case \"REGISTER\":\n      console.log(action.payload);\n      state.socket.send(JSON.stringify(action.payload));\n      return state;\n\n    case \"FIRSTRESPONSE\":\n      console.log(action.payload);\n      state.socket.send(action.payload);\n      return { ...state,\n        firstWelcome: false\n      };\n\n    case \"RESPONSE\"\n    /* TODO decipher and handle response here!! */\n    :\n      console.log(\"handle the response bro pls\");\n      console.log(action.payload);\n\n      let newChats = prev => {\n        return [...prev, action.payload.data];\n      };\n\n      return { ...state,\n        incomingChats: newChats(state.incomingChats)\n      };\n\n    case \"DISCONNECTED\":\n      return { ...state,\n        socket: action.payload,\n        wsOnline: false\n      };\n\n    case \"SETSERVER\":\n      return { ...state,\n        socketServer: action.payload\n      };\n\n    case \"SENDMESSAGE\":\n      state.socket.send(JSON.stringify(action.payload));\n      return state;\n\n    default:\n      return state;\n  }\n};\n\nexport default socketReducer;","map":{"version":3,"sources":["/Users/Mark/Documents/Skola/OSPP/adrenaline/frontend/src/reducers/socketReducer.js"],"names":["initialState","socket","wsOnline","socketServer","firstWelcome","incomingChats","socketReducer","state","action","type","console","log","payload","send","JSON","stringify","newChats","prev","data"],"mappings":"AAAA,MAAMA,YAAY,GAAG;AAAEC,EAAAA,MAAM,EAAE,IAAV;AAAgBC,EAAAA,QAAQ,EAAE,KAA1B;AAAiCC,EAAAA,YAAY,EAAE,IAA/C;AAAqDC,EAAAA,YAAY,EAAE,IAAnE;AAAyEC,EAAAA,aAAa,EAAE,CAAC,EAAD;AAAxF,CAArB;AAEA;;;;;;;AAMA,MAAMC,aAAa,GAAG,CAACC,KAAK,GAAGP,YAAT,EAAuBQ,MAAvB,KAAkC;AACtD,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,SAAL;AACE;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,aAAO,EAAE,GAAGJ,KAAL;AAAYN,QAAAA,MAAM,EAAEO,MAAM,CAACI,OAA3B;AAAoCV,QAAAA,QAAQ,EAAE,IAA9C;AAAoDE,QAAAA,YAAY,EAAE;AAAlE,OAAP;;AACF,SAAK,UAAL;AACEM,MAAAA,OAAO,CAACC,GAAR,CAAYH,MAAM,CAACI,OAAnB;AACAL,MAAAA,KAAK,CAACN,MAAN,CAAaY,IAAb,CAAkBC,IAAI,CAACC,SAAL,CAAeP,MAAM,CAACI,OAAtB,CAAlB;AACA,aAAOL,KAAP;;AACF,SAAK,eAAL;AACEG,MAAAA,OAAO,CAACC,GAAR,CAAYH,MAAM,CAACI,OAAnB;AACAL,MAAAA,KAAK,CAACN,MAAN,CAAaY,IAAb,CAAkBL,MAAM,CAACI,OAAzB;AACA,aAAO,EAAE,GAAGL,KAAL;AAAYH,QAAAA,YAAY,EAAG;AAA3B,OAAP;;AACF,SAAK;AAAW;AAAhB;AACEM,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYH,MAAM,CAACI,OAAnB;;AACA,UAAII,QAAQ,GAAIC,IAAD,IAAU;AACvB,eAAO,CAAC,GAAGA,IAAJ,EAAUT,MAAM,CAACI,OAAP,CAAeM,IAAzB,CAAP;AACD,OAFD;;AAGA,aAAO,EAAC,GAAGX,KAAJ;AAAWF,QAAAA,aAAa,EAAEW,QAAQ,CAACT,KAAK,CAACF,aAAP;AAAlC,OAAP;;AACF,SAAK,cAAL;AACE,aAAO,EAAE,GAAGE,KAAL;AAAYN,QAAAA,MAAM,EAAEO,MAAM,CAACI,OAA3B;AAAoCV,QAAAA,QAAQ,EAAE;AAA9C,OAAP;;AACF,SAAK,WAAL;AACE,aAAO,EAAE,GAAGK,KAAL;AAAYJ,QAAAA,YAAY,EAAEK,MAAM,CAACI;AAAjC,OAAP;;AACF,SAAK,aAAL;AACEL,MAAAA,KAAK,CAACN,MAAN,CAAaY,IAAb,CAAkBC,IAAI,CAACC,SAAL,CAAeP,MAAM,CAACI,OAAtB,CAAlB;AACA,aAAOL,KAAP;;AACF;AACE,aAAOA,KAAP;AA5BJ;AA8BD,CA/BD;;AAiCA,eAAeD,aAAf","sourcesContent":["const initialState = { socket: null, wsOnline: false, socketServer: null, firstWelcome: null, incomingChats: [\"\"] };\n\n/**\n * perform a task depending on the action dispatched\n *\n * @property {object} state the current state that is being held by the redux store\n * @property {object} action contains the type and payload\n */\nconst socketReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"CONNECT\":\n      /* store websocket in state.socket */\n      console.log(\"connecting to ws\");\n      return { ...state, socket: action.payload, wsOnline: true, firstWelcome: true };\n    case \"REGISTER\":\n      console.log(action.payload);\n      state.socket.send(JSON.stringify(action.payload));\n      return state;\n    case \"FIRSTRESPONSE\":\n      console.log(action.payload);\n      state.socket.send(action.payload);\n      return { ...state, firstWelcome : false};\n    case \"RESPONSE\" /* TODO decipher and handle response here!! */:\n      console.log(\"handle the response bro pls\");\n      console.log(action.payload);\n      let newChats = (prev) => {\n        return [...prev, action.payload.data];\n      }\n      return {...state, incomingChats: newChats(state.incomingChats) };\n    case \"DISCONNECTED\":\n      return { ...state, socket: action.payload, wsOnline: false };\n    case \"SETSERVER\":\n      return { ...state, socketServer: action.payload };\n    case \"SENDMESSAGE\": \n      state.socket.send(JSON.stringify(action.payload));\n      return state;\n    default:\n      return state;\n  }\n};\n\nexport default socketReducer;\n"]},"metadata":{},"sourceType":"module"}